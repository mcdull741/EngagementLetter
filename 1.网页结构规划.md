# Engagement Letter管理系统 - 网站结构规划

## 整体架构
基于ASP.NET Core MVC构建，采用分层架构设计，包含以下主要部分：

### 项目组织结构
```
EngagementLetterManagement/
├── Areas/
│   ├── Admin/
│   │   ├── Controllers/
│   │   ├── Views/
│   │   └── Models/
│   └── User/
│       ├── Controllers/
│       ├── Views/
│       └── Models/
├── Controllers/
├── Views/
├── Models/
│   ├── Entities/
│   ├── ViewModels/
│   └── DTOs/
├── Data/
│   ├── ApplicationDbContext.cs
│   └── Migrations/
├── Services/
├── wwwroot/
│   ├── css/
│   ├── js/
│   └── lib/
├── Program.cs
└── appsettings.json
```

## 核心功能模块

### 1. 主页与导航结构
- **网站首页** - 作为所有功能的入口点，包含以下元素：
  - 网站标题与logo
  - 主导航菜单（根据用户角色动态显示）
  - 用户登录/注册入口（处于POC阶段，不需要此元素，默认以管理员身份登录）
  - 快速功能入口卡片

- **导航菜单设计**
  - **管理员登录**：首页 | 问卷管理 | Engagement Letter管理
  - **普通用户登录**：首页 | Engagement Letter管理

### 2. 数据模型设计
- **Questionnaire** - 问卷基本信息(标题、描述、创建日期等)
- **Question** - 问题(内容、选项、类型、排序等)
- **EngagementLetterTemplate** - engagement letter模板
- **EngagementLetter** - 用户回答记录，用户可以选择保存，修改或删除
- **UserResponse** - 用户对问题的回答记录

### 2. 管理员功能区
- 问卷管理(CRUD操作，增删改查)
- 模板管理(创建和编辑engagement letter模板)

### 3. 用户功能区
- 问卷填写界面，保存为一份engagement letter
- Engagement letter管理(CRUD操作)
- 预览生成的engagement letter(生成word文件, 并通过页面预览)
- 导出文档(Word格式)
- engagement letter的导出历史记录

## 主要控制器
- **Admin区域**
  - QuestionnairesController - 管理问卷
  - QuestionsController - 管理问题
  - TemplatesController - 管理模板

- **User区域**
  - QuestionnaireResponsesController - 问卷回答和保存
  - EngagementLettersController - 生成和导出文档
  - HomeController - 用户主页

- **共享控制器**
  - AccountController - 身份验证（处于POC阶段，默认以管理员身份登录）
  - HomeController - 网站首页，负责导航菜单生成、用户角色判断和主页内容展示

## 技术实现要点
1. **身份验证与授权**
   - 使用ASP.NET Core Identity（处于POC阶段，默认以管理员身份登录）
   - 基于角色的访问控制(Admin/User)

2. **数据存储**
   - Entity Framework Core
   - SQL Server数据库（处于POC阶段，使用SQLite数据库）

3. **前端技术**
   - Bootstrap 5 用于响应式设计
   - jQuery 用于交互功能
   - 富文本编辑器(如CKEditor)用于模板编辑

4. **文档导出**
   - 使用ClosedXML库用于生成Word文档

## 用户流程
1. **管理员流程**
   - 创建问卷 → 添加问题 → 设计模板 → 发布问卷

2. **用户流程**
   - 登录系统 → 回答问题 → 预览文档 → 导出engagement letter

这个结构设计遵循了ASP.NET Core MVC的最佳实践，通过Areas功能区分了管理员和普通用户的功能模块，便于维护和扩展。系统架构清晰，功能完整，能够满足您对engagement letter管理的需求。